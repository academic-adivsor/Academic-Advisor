{"version":3,"sources":["adminCtrl.js"],"names":["AsyncHandler","require","Admin","generateToken","verifyToken","exports","registerAdmnCtrl","req","res","body","name","email","password","findOne","adminFound","Error","create","user","status","json","data","loginAdminCtrl","message","verifyPassword","token","_id","verify","getAdminsCtrl","error","getAdminCtrl","updateAdminCtrl","deleteAdminCtrl","adminSuspendTeacherCtrl","adminUnSuspendTeacherCtrl","adminWithdrawTeacherCtrl","adminUnWithdrawTeacherCtrl","adminPublishResultsCtrl","adminUnPublishResultsCtrl"],"mappings":"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","sourcesContent":["const AsyncHandler = require(\"express-async-handler\");\r\nconst Admin = require(\"../../model/staff/Admin\");\r\nconst generateToken = require(\"../../utlis/generateToken\");\r\nconst verifyToken = require(\"../../utlis/verifyToken\");\r\n//desc register admin\r\n//router POST /api/admin/register\r\n//@aces Private\r\nexports.registerAdmnCtrl = AsyncHandler(async(req, res) => {\r\n    const { name, email, password } = req.body;\r\n    //check if email exists\r\n    const adminFound = await Admin.findOne({ email });\r\n    if (adminFound) {\r\n        throw new Error(\"Admin Exists\");\r\n    }\r\n    const user = await Admin.create({\r\n        name,\r\n        email,\r\n        password,\r\n    });\r\n    res.status(201).json({\r\n        status: \"success\",\r\n        data: user,\r\n    });\r\n});\r\n//@desc login admin\r\n//@route POST /api/v1/admins/login\r\n//@access Private\r\nexports.loginAdminCtrl = AsyncHandler(async(req, res) => {\r\n    const { email, password } = req.body;\r\n    //find user\r\n    const user = await Admin.findOne({ email });\r\n    if (!user) {\r\n        return res.json({ message: \"Invalid login crendentials\" });\r\n    }\r\n    if (user && (await user.verifyPassword(password))) {\r\n        const token = generateToken(user._id);\r\n        const verify = verifyToken(token);\r\n        return res.json({ data: generateToken(user._id), user, verify });\r\n    } else {\r\n        return res.json({ message: \"Invalid login crendentials\" });\r\n    }\r\n});\r\n//@desc Get all admin\r\n//@route GET /api/v1/admins\r\n//@access Private\r\nexports.getAdminsCtrl = (req, res) => {\r\n    try {\r\n        res.status(201).json({\r\n            status: \"success\",\r\n            data: \"All admins\",\r\n        });\r\n    } catch (error) {\r\n        res.json({\r\n            status: \"failed\",\r\n            error: error.message,\r\n        });\r\n    }\r\n};\r\n//@desc Get single admin\r\n//@route GET /api/v1/admins/:id\r\n//@access Private\r\nexports.getAdminCtrl = (req, res) => {\r\n    try {\r\n        res.status(201).json({\r\n            status: \"success\",\r\n            data: \"added single admin\",\r\n        });\r\n    } catch (error) {\r\n        res.json({\r\n            status: \"failed\",\r\n            error: error.message,\r\n        });\r\n    }\r\n};\r\n//@desc update admin\r\n//@route UPDATE /api/v1/admins/:id\r\n//@access Private\r\nexports.updateAdminCtrl = (req, res) => {\r\n    try {\r\n        res.status(201).json({\r\n            status: \"success\",\r\n            data: \"update admin\",\r\n        });\r\n    } catch (error) {\r\n        res.json({\r\n            status: \"failed\",\r\n            error: error.message,\r\n        });\r\n    }\r\n};\r\n//@desc delete admin\r\n//@route DELETE /api/v1/admins/:id\r\n//@access Private\r\nexports.deleteAdminCtrl = (req, res) => {\r\n    try {\r\n        res.status(201).json({\r\n            status: \"success\",\r\n            data: \"delete admin\",\r\n        });\r\n    } catch (error) {\r\n        res.json({\r\n            status: \"failed\",\r\n            error: error.message,\r\n        });\r\n    }\r\n};\r\n//@desc admin suspend a teacher\r\n//@route PUT /api/v1/admins/suspend/teacher:id\r\n//@access Private\r\nexports.adminSuspendTeacherCtrl = (req, res) => {\r\n    try {\r\n        res.status(201).json({\r\n            status: \"success\",\r\n            data: \"admin suspend teacher\",\r\n        });\r\n    } catch (error) {\r\n        res.json({\r\n            status: \"failed\",\r\n            error: error.message,\r\n        });\r\n    }\r\n};\r\n//@desc admin unsuspend a teacher\r\n//@route PUT /api/v1/admins/unsuspend/teacher:id\r\n//@access Private\r\nexports.adminUnSuspendTeacherCtrl = (req, res) => {\r\n    try {\r\n        res.status(201).json({\r\n            status: \"success\",\r\n            data: \"admin unsuspend teacher\",\r\n        });\r\n    } catch (error) {\r\n        res.json({\r\n            status: \"failed\",\r\n            error: error.message,\r\n        });\r\n    }\r\n};\r\n//@desc admin withdraws a teacher\r\n//@route PUT /api/v1/admins/withdraws/teacher:id\r\n//@access Private\r\nexports.adminWithdrawTeacherCtrl = (req, res) => {\r\n    try {\r\n        res.status(201).json({\r\n            status: \"success\",\r\n            data: \"admin withdraw teacher\",\r\n        });\r\n    } catch (error) {\r\n        res.json({\r\n            status: \"failed\",\r\n            error: error.message,\r\n        });\r\n    }\r\n};\r\n//@desc admin unwithdraws a teacher\r\n//@route PUT /api/v1/admins/unwithdraws/teacher:id\r\n//@access Private\r\nexports.adminUnWithdrawTeacherCtrl = (req, res) => {\r\n    try {\r\n        res.status(201).json({\r\n            status: \"success\",\r\n            data: \"admin unwithdraw teacher\",\r\n        });\r\n    } catch (error) {\r\n        res.json({\r\n            status: \"failed\",\r\n            error: error.message,\r\n        });\r\n    }\r\n};\r\n//@desc admin publish exam results\r\n//@route PUT /api/v1/admins/publish/exam:id\r\n//@access Private\r\nexports.adminPublishResultsCtrl = (req, res) => {\r\n    try {\r\n        res.status(201).json({\r\n            status: \"success\",\r\n            data: \"admin publish exam results\",\r\n        });\r\n    } catch (error) {\r\n        res.json({\r\n            status: \"failed\",\r\n            error: error.message,\r\n        });\r\n    }\r\n};\r\n//@desc admin unpublish exam results\r\n//@route PUT /api/v1/admins/unpublish/exam:id\r\n//@access Private\r\nexports.adminUnPublishResultsCtrl = (req, res) => {\r\n    try {\r\n        res.status(201).json({\r\n            status: \"success\",\r\n            data: \"admin unpublish exam results\",\r\n        });\r\n    } catch (error) {\r\n        res.json({\r\n            status: \"failed\",\r\n            error: error.message,\r\n        });\r\n    }\r\n};"],"file":"adminCtrl.dev.js"}