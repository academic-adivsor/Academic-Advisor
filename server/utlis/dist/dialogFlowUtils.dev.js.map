{"version":3,"sources":["dialogFlowUtils.js"],"names":["require","SessionsClient","serviceAccount","processUserMessage","userMessage","sessionId","sessionClient","credentials","session","sessionPath","queryInput","text","languageCode","detectIntent","responses","queryResult","fulfillmentText","console","error","module","exports"],"mappings":";;eAA2BA,OAAO,CAAC,YAAD,C;IAA1BC,c,YAAAA,c;;AACR,IAAMC,cAAc,GAAGF,OAAO,CAAC,mCAAD,CAA9B;;AAEA,IAAMG,kBAAkB,GAAG,SAArBA,kBAAqB,CAAOC,WAAP,EAAoBC,SAApB,EAA+BH,cAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AACnBI,UAAAA,aADmB,GACH,IAAIL,cAAJ,CAAmB;AAAEM,YAAAA,WAAW,EAAEL;AAAf,WAAnB,CADG;AAEnBM,UAAAA,OAFmB,GAETF,aAAa,CAACG,WAAd,CAA0B,aAA1B,EAAyCJ,SAAzC,CAFS;AAGnBK,UAAAA,UAHmB,GAGN;AACjBC,YAAAA,IAAI,EAAE;AACJA,cAAAA,IAAI,EAAEP,WADF;AAEJQ,cAAAA,YAAY,EAAE;AAFV;AADW,WAHM;AAAA;AAAA;AAAA,0CAWCN,aAAa,CAACO,YAAd,CAA2B;AAAEL,YAAAA,OAAO,EAAPA,OAAF;AAAWE,YAAAA,UAAU,EAAVA;AAAX,WAA3B,CAXD;;AAAA;AAWjBI,UAAAA,SAXiB;AAAA,2CAYhBA,SAAS,CAAC,CAAD,CAAT,CAAaC,WAAb,CAAyBC,eAZT;;AAAA;AAAA;AAAA;AAcvBC,UAAAA,OAAO,CAACC,KAAR,CAAc,QAAd;AAduB,2CAehB,+CAfgB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAA3B;;AAmBAC,MAAM,CAACC,OAAP,GAAiB;AAAEjB,EAAAA,kBAAkB,EAAlBA;AAAF,CAAjB","sourcesContent":["const { SessionsClient } = require('dialogflow');\r\nconst serviceAccount = require('../../dialogflow-credentials.json');\r\n\r\nconst processUserMessage = async (userMessage, sessionId, serviceAccount) => {\r\n  const sessionClient = new SessionsClient({ credentials: serviceAccount });\r\n  const session = sessionClient.sessionPath('parker-pslk', sessionId);\r\n  const queryInput = {\r\n    text: {\r\n      text: userMessage,\r\n      languageCode: 'en-US',\r\n    },\r\n  };\r\n  \r\n  try {\r\n    const responses = await sessionClient.detectIntent({ session, queryInput });\r\n    return responses[0].queryResult.fulfillmentText;\r\n  } catch (error) {\r\n    console.error('Error:', error);\r\n    return 'Oops! Something went wrong. Please try again.'; // Default error message\r\n  }\r\n};\r\n\r\nmodule.exports = { processUserMessage };"],"file":"dialogFlowUtils.dev.js"}