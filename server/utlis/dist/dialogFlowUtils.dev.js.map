{"version":3,"sources":["dialogFlowUtils.js"],"names":["require","SessionsClient","processUserMessage","userMessage","sessionId","serviceAccount","console","log","sessionClient","credentials","session","projectAgentSessionPath","queryInput","text","languageCode","detectIntent","responses","queryResult","fulfillmentText","error","module","exports"],"mappings":";;eAA2BA,OAAO,CAAC,0BAAD,C;IAA1BC,c,YAAAA,c;;AAER,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAAOC,WAAP,EAAoBC,SAApB,EAA+BC,cAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AACzBC,UAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BJ,WAA5B;AACAG,UAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BH,SAA1B;AACAE,UAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BF,cAA/B;AACMG,UAAAA,aAJmB,GAIH,IAAIP,cAAJ,CAAmB;AAAEQ,YAAAA,WAAW,EAAEJ;AAAf,WAAnB,CAJG;AAKnBK,UAAAA,OALmB,GAKTF,aAAa,CAACG,uBAAd,CAAsC,aAAtC,EAAqDP,SAArD,CALS;AAMnBQ,UAAAA,UANmB,GAMN;AACjBC,YAAAA,IAAI,EAAE;AACJA,cAAAA,IAAI,EAAEV,WADF;AAEJW,cAAAA,YAAY,EAAE;AAFV;AADW,WANM;AAAA;AAAA;AAAA,0CAcCN,aAAa,CAACO,YAAd,CAA2B;AAAEL,YAAAA,OAAO,EAAPA,OAAF;AAAWE,YAAAA,UAAU,EAAVA;AAAX,WAA3B,CAdD;;AAAA;AAcjBI,UAAAA,SAdiB;AAAA,2CAehBA,SAAS,CAAC,CAAD,CAAT,CAAaC,WAAb,CAAyBC,eAfT;;AAAA;AAAA;AAAA;AAiBvBZ,UAAAA,OAAO,CAACa,KAAR,CAAc,QAAd;AAjBuB,2CAkBhB,+CAlBgB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAA3B;;AAsBAC,MAAM,CAACC,OAAP,GAAiB;AAAEnB,EAAAA,kBAAkB,EAAlBA;AAAF,CAAjB","sourcesContent":["const { SessionsClient } = require('@google-cloud/dialogflow');\r\n\r\nconst processUserMessage = async (userMessage, sessionId, serviceAccount) => {\r\n  console.log('userMessage:', userMessage);\r\n  console.log('sessionId:', sessionId);\r\n  console.log('serviceAccount:', serviceAccount)\r\n  const sessionClient = new SessionsClient({ credentials: serviceAccount });\r\n  const session = sessionClient.projectAgentSessionPath('parker-pslk', sessionId);\r\n  const queryInput = {\r\n    text: {\r\n      text: userMessage,\r\n      languageCode: 'en-US',\r\n    },\r\n  };\r\n  \r\n  try {\r\n    const responses = await sessionClient.detectIntent({ session, queryInput });\r\n    return responses[0].queryResult.fulfillmentText;\r\n  } catch (error) {\r\n    console.error('Error:', error);\r\n    return 'Oops! Something went wrong. Please try again.'; // Default error message\r\n  }\r\n};\r\n\r\nmodule.exports = { processUserMessage };"],"file":"dialogFlowUtils.dev.js"}