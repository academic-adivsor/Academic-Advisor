{"version":3,"sources":["dialogFlowUtils.js"],"names":["require","SessionsClient","processUserMessage","userMessage","sessionId","serviceAccount","sessionClient","session","queryInput","responses","regeneratorRuntime","async","_context","prev","next","console","log","credentials","projectAgentSessionPath","text","awrap","detectIntent","sent","abrupt","t0","stop","module","exports"],"mappings":"0BAA2BA,QAAQ,4BAA3BC,wBAAAA,eAEFC,mBAF6B,SAAAC,EAAAC,EAEuBC,GAFvB,IAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAC,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAA,OAGjCC,QAHMd,IAAAA,eAAAA,GAINc,QAAQC,IAAI,aAAcZ,GAF5BW,QAAMb,IAAAA,kBAAqBG,GAAAC,EAAA,IAAAL,eAAA,CAAAgB,YAAAZ,IAAAE,EAAAD,EAAAY,wBAAA,cAAAd,GAAAI,EAAA,CAAAW,KAAA,CAAAA,KAAAhB,EACzBY,aAAQC,UAHyBJ,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAAAJ,mBAAAU,MAERd,EAAAe,aAAA,CAAAd,QAAAA,EAAAC,WAAAA,KAFQ,KAAA,EAAA,OAMQC,EANRG,EAAAU,KAAAV,EAAAW,OAAA,SAO3BhB,EAAUD,GAAAA,YAAcY,iBAPG,KAAA,GAAA,OAAAN,EAAAC,KAAA,GAAAD,EAAAY,GAAAZ,EAAA,MAAA,GAS/BO,QAAAA,MAAM,SAANA,EAAAA,IAT+BP,EAAAW,OAAA,SAU7BJ,iDAV6B,KAAA,GAAA,IAAA,MAAA,OAAAP,EAAAa,SAAA,KAAA,KAAA,CAAA,CAAA,EAAA,OAERC,OAAAC,QAAA,CAAAzB,mBAAAA","file":"dialogFlowUtils.min.js","sourcesContent":["const { SessionsClient } = require('@google-cloud/dialogflow');\r\n\r\nconst processUserMessage = async (userMessage, sessionId, serviceAccount) => {\r\n  console.log('userMessage:', userMessage);\r\n  console.log('sessionId:', sessionId);\r\n  console.log('serviceAccount:', serviceAccount)\r\n  const sessionClient = new SessionsClient({ credentials: serviceAccount });\r\n  const session = sessionClient.projectAgentSessionPath('parker-pslk', sessionId);\r\n  const queryInput = {\r\n    text: {\r\n      text: userMessage,\r\n      languageCode: 'en-US',\r\n    },\r\n  };\r\n  \r\n  try {\r\n    const responses = await sessionClient.detectIntent({ session, queryInput });\r\n    return responses[0].queryResult.fulfillmentText;\r\n  } catch (error) {\r\n    console.error('Error:', error);\r\n    return 'Oops! Something went wrong. Please try again.'; // Default error message\r\n  }\r\n};\r\n\r\nmodule.exports = { processUserMessage };"]}