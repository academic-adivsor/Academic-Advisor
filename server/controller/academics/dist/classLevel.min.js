"use strict";var AysncHandler=require("express-async-handler"),ClassLevel=require("../../model/Academic/ClassLevel"),Admin=require("../../model/staff/Admin");exports.createClassLevel=AysncHandler(function(s,r){var a,t,n,c,u;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.body,t=a.name,n=a.description,a.duration,e.next=3,regeneratorRuntime.awrap(ClassLevel.findOne({name:t}));case 3:if(e.sent)throw new Error("Class  already exists");e.next=6;break;case 6:return e.next=8,regeneratorRuntime.awrap(ClassLevel.create({name:t,description:n,createdBy:s.userAuth._id}));case 8:return c=e.sent,e.next=11,regeneratorRuntime.awrap(Admin.findById(s.userAuth._id));case 11:return(u=e.sent).classLevels.push(c._id),e.next=15,regeneratorRuntime.awrap(u.save());case 15:r.status(201).json({status:"success",message:"Class created successfully",data:c});case 16:case"end":return e.stop()}})}),exports.getClassLevels=AysncHandler(function(e,s){var r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(ClassLevel.find());case 2:r=e.sent,s.status(201).json({status:"success",message:"Class Levels fetched successfully",data:r});case 4:case"end":return e.stop()}})}),exports.getClassLevel=AysncHandler(function(s,r){var a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(ClassLevel.findById(s.params.id));case 2:a=e.sent,r.status(201).json({status:"success",message:"Class fetched successfully",data:a});case 4:case"end":return e.stop()}})}),exports.updateclassLevel=AysncHandler(function(s,r){var a,t,n,c;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.body,t=a.name,n=a.description,e.next=3,regeneratorRuntime.awrap(ClassLevel.findOne({name:t}));case 3:if(e.sent)throw new Error("Class already exists");e.next=6;break;case 6:return e.next=8,regeneratorRuntime.awrap(ClassLevel.findByIdAndUpdate(s.params.id,{name:t,description:n,createdBy:s.userAuth._id},{new:!0}));case 8:c=e.sent,r.status(201).json({status:"success",message:"Class  updated successfully",data:c});case 10:case"end":return e.stop()}})}),exports.deleteClassLevel=AysncHandler(function(s,r){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(ClassLevel.findByIdAndDelete(s.params.id));case 2:r.status(201).json({status:"success",message:"Class level deleted successfully"});case 3:case"end":return e.stop()}})});
//# sourceMappingURL=classLevel.min.js.map
