"use strict";var AysncHandler=require("express-async-handler"),Program=require("../../model/Academic/Program"),Subject=require("../../model/Academic/Subject"),Admin=require("../../model/staff/Admin");exports.createSubject=AysncHandler(function(r,t){var s,a,n,c,u,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.body,a=s.name,n=s.description,c=s.academicTerm,e.next=3,regeneratorRuntime.awrap(Program.findById(r.params.programID));case 3:if(u=e.sent){e.next=6;break}throw new Error("Program  not found");case 6:return e.next=8,regeneratorRuntime.awrap(Subject.findOne({name:a}));case 8:if(e.sent)throw new Error("Subject  already exists");e.next=11;break;case 11:return e.next=13,regeneratorRuntime.awrap(Subject.create({name:a,description:n,academicTerm:c,createdBy:r.userAuth._id}));case 13:return o=e.sent,u.subjects.push(o._id),e.next=17,regeneratorRuntime.awrap(u.save());case 17:t.status(201).json({status:"success",message:"Program created successfully",data:o});case 18:case"end":return e.stop()}})}),exports.getSubjects=AysncHandler(function(e,r){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(Subject.find());case 2:t=e.sent,r.status(201).json({status:"success",message:"Subjects fetched successfully",data:t});case 4:case"end":return e.stop()}})}),exports.getProgram=AysncHandler(function(r,t){var s;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(Subject.findById(r.params.id));case 2:s=e.sent,t.status(201).json({status:"success",message:"Subject fetched successfully",data:s});case 4:case"end":return e.stop()}})}),exports.updatSubject=AysncHandler(function(r,t){var s,a,n,c,u;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.body,a=s.name,n=s.description,c=s.academicTerm,e.next=3,regeneratorRuntime.awrap(Subject.findOne({name:a}));case 3:if(e.sent)throw new Error("Program already exists");e.next=6;break;case 6:return e.next=8,regeneratorRuntime.awrap(Subject.findByIdAndUpdate(r.params.id,{name:a,description:n,academicTerm:c,createdBy:r.userAuth._id},{new:!0}));case 8:u=e.sent,t.status(201).json({status:"success",message:"subject  updated successfully",data:u});case 10:case"end":return e.stop()}})}),exports.deleteSubject=AysncHandler(function(r,t){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(Subject.findByIdAndDelete(r.params.id));case 2:t.status(201).json({status:"success",message:"subject deleted successfully"});case 3:case"end":return e.stop()}})});
//# sourceMappingURL=subjects.min.js.map
