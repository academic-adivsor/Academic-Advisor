"use strict";var AysncHandler=require("express-async-handler"),ClassLevel=require("../../model/Academic/ClassLevel"),Program=require("../../model/Academic/Program"),Admin=require("../../model/staff/Admin");exports.createProgram=AysncHandler(function(r,s){var a,t,n,c,u;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.body,t=a.name,n=a.description,e.next=3,regeneratorRuntime.awrap(Program.findOne({name:t}));case 3:if(e.sent)throw new Error("Program  already exists");e.next=6;break;case 6:return e.next=8,regeneratorRuntime.awrap(Program.create({name:t,description:n,createdBy:r.userAuth._id}));case 8:return c=e.sent,e.next=11,regeneratorRuntime.awrap(Admin.findById(r.userAuth._id));case 11:return(u=e.sent).programs.push(c._id),e.next=15,regeneratorRuntime.awrap(u.save());case 15:s.status(201).json({status:"success",message:"Program created successfully",data:c});case 16:case"end":return e.stop()}})}),exports.getPrograms=AysncHandler(function(e,r){var s;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(Program.find());case 2:s=e.sent,r.status(201).json({status:"success",message:"Programs fetched successfully",data:s});case 4:case"end":return e.stop()}})}),exports.getProgram=AysncHandler(function(r,s){var a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(Program.findById(r.params.id));case 2:a=e.sent,s.status(201).json({status:"success",message:"Program fetched successfully",data:a});case 4:case"end":return e.stop()}})}),exports.updatProgram=AysncHandler(function(r,s){var a,t,n,c;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.body,t=a.name,n=a.description,e.next=3,regeneratorRuntime.awrap(ClassLevel.findOne({name:t}));case 3:if(e.sent)throw new Error("Program already exists");e.next=6;break;case 6:return e.next=8,regeneratorRuntime.awrap(Program.findByIdAndUpdate(r.params.id,{name:t,description:n,createdBy:r.userAuth._id},{new:!0}));case 8:c=e.sent,s.status(201).json({status:"success",message:"Program  updated successfully",data:c});case 10:case"end":return e.stop()}})}),exports.deleteProgram=AysncHandler(function(r,s){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(Program.findByIdAndDelete(r.params.id));case 2:s.status(201).json({status:"success",message:"Program deleted successfully"});case 3:case"end":return e.stop()}})});
//# sourceMappingURL=programs.min.js.map
