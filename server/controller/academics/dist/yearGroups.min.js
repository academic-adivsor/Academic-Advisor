"use strict";var AysncHandler=require("express-async-handler"),Program=require("../../model/Academic/Program"),Subject=require("../../model/Academic/Subject"),YearGroup=require("../../model/Academic/YearGroup"),Admin=require("../../model/staff/Admin");exports.createYearGroup=AysncHandler(function(r,a){var t,n,s,u,c;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.body,n=t.name,s=t.academicYear,e.next=3,regeneratorRuntime.awrap(YearGroup.findOne({name:n}));case 3:if(e.sent)throw new Error("Year Group/Graduation   already exists");e.next=6;break;case 6:return e.next=8,regeneratorRuntime.awrap(YearGroup.create({name:n,academicYear:s,createdBy:r.userAuth._id}));case 8:return u=e.sent,e.next=11,regeneratorRuntime.awrap(Admin.findById(r.userAuth._id));case 11:if(c=e.sent){e.next=14;break}throw new Error("Admin not found");case 14:return c.yearGroups.push(u._id),e.next=17,regeneratorRuntime.awrap(c.save());case 17:a.status(201).json({status:"success",message:"Year Group created successfully",data:u});case 18:case"end":return e.stop()}})}),exports.getYearGroups=AysncHandler(function(e,r){var a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(YearGroup.find());case 2:a=e.sent,r.status(201).json({status:"success",message:"Year Groups fetched successfully",data:a});case 4:case"end":return e.stop()}})}),exports.getYearGroup=AysncHandler(function(r,a){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(YearGroup.findById(r.params.id));case 2:t=e.sent,a.status(201).json({status:"success",message:"Year Group fetched successfully",data:t});case 4:case"end":return e.stop()}})}),exports.updateYearGroup=AysncHandler(function(r,a){var t,n,s,u;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.body,n=t.name,s=t.academicYear,e.next=3,regeneratorRuntime.awrap(YearGroup.findOne({name:n}));case 3:if(e.sent)throw new Error("year Group already exists");e.next=6;break;case 6:return e.next=8,regeneratorRuntime.awrap(YearGroup.findByIdAndUpdate(r.params.id,{name:n,academicYear:s,createdBy:r.userAuth._id},{new:!0}));case 8:u=e.sent,a.status(201).json({status:"success",message:"Year Group  updated successfully",data:u});case 10:case"end":return e.stop()}})}),exports.deleteYearGroup=AysncHandler(function(r,a){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(YearGroup.findByIdAndDelete(r.params.id));case 2:a.status(201).json({status:"success",message:"Year Group deleted successfully"});case 3:case"end":return e.stop()}})});
//# sourceMappingURL=yearGroups.min.js.map
